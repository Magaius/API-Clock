# 前言

本项目基于Cordova开发，打包的apk支持Android9+，主要功能为 监听b站用户直播情况，开播进行闹钟提示  
*ps：目前版本还是有蛮多问题的，如有遇到可以及时反馈，我会想办法进行修复。*  
## 源码下载
[码云](https://gitee.com/ikaros-521/API-Clock) [GitHub](https://github.com/Ikaros-521/API-Clock)
## apk下载
[码云](https://gitee.com/ikaros-521/API-Clock/releases/v2.2.1) [GitHub](https://github.com/Ikaros-521/API-Clock/releases)
## 使用介绍
**重点说明：如果手机有省电策略，请关闭应用的省电策略避免应用被挂**
![在这里插入图片描述](https://img-blog.csdnimg.cn/2ee3b91f076741d68197329b5b1a66a0.png)


1、首次安装运行程序时会提示权限获取，如果没有给予相应权限则部分功能无法正常使用。（网络用于API请求）  
2、运行后，可以进行相应的设置（初次使用可以直接点击“配置初始化”，自动完成默认配置）。  
功能页：  
1）闹钟提醒的音频文件（正常mp3等格式），设置成功后，下方的音频控件会加载音频信息（如果没有加载，可能是文件格式或路径原因，请重新选择文件；另外记得调下音量）；
2）UID填写监听B站用户的UID，UID与UID直接用“空格”分隔；  
3）轮循间隔是循环调用API的时间差，设置时间越大，开播响应就越慢，流量消耗越少（虽然也要不了几个流量，但不建议太快，有可能会被禁IP）；  
设置页：  
1）可以修改背景图片；  
ps：由于音频和背景图片都是临时生成的加密url，软件重启后则无法正常定位到文件，所以重启后需要重新进行设置。  
3、相关配置完成后，回到“功能”页，点击“保存配置”就会写入配置到本地文件中“Documents/APIClock/baseInfo.json”。
4、所有配置完成后，点击“自启动运行”即可。程序会程序运行并输出必要的日志。  
5、当有设置的用户开播后，程序会“播放音乐”并不在监测此用户，如需继续监听此用户，可以重新点击“自启动运行”。
如需关闭程序可以点击“停止运行”或直接关闭程序。  
6、日志内容说明：日志有“红、绿、灰、橙”四种颜色，如果出现红色日志，则表示运行出了一些问题，常见的问题为基本是 权限授予问题和网络问题。
日志过多时可以点击“清空日志”或者“每分钟清空日志”来进行日志清理。  
  

## 效果图
![请添加图片描述](https://img-blog.csdnimg.cn/62cc7f8daf7547c491e4b3b92856e7dd.png)

## 已测机型
✅ 表示兼容可用  
⬜️ 表示不完全兼容，核心功能可用  
|手机型号|兼容性  |
|--|--|
| 小米10| ✅ |
| vivo x23 | ✅ |
| 华为荣耀P20| ⬜️ |

## cordova 插件安装

cordova plugin add cordova-plugin-file  
cordova plugin add cordova-plugin-media  
cordova plugin add cordova-plugin-autostart@2.3.0  
cordova plugin add cordova-plugin-background-mode  
cordova plugin add cordova-plugin-android-permissions  
cordova plugin add cordova-plugin-local-notification  

# 测试记录
## 纯前台
*不考虑亮屏情况，不然就没有意义了。*

## 挂后台
### 程序运行在 小米的“智能限制”省电策略下
1、息屏15分钟可正常运行（轮循间隔10s）✅   
2、挂后台后，开启“1”或“3”个新软件使用，程序持续运行“5分40秒”或“1分30秒”后出现get请求出错问题❌（期间有wifi、流量切换情况），重新进入程序，get请求恢复正常，成功完成开播提醒✅ 。  
### 关闭省电策略后！！！
1、挂后台后，开启“4”个新软件使用，1时45分后，开播顺利触发✅ 。  
2、挂后台，断网锁屏睡觉，6时50分钟后，开播顺利触发✅ 。  
![在这里插入图片描述](https://img-blog.csdnimg.cn/d249c2f338754cfbabbe6493e4a80b41.png)
# 更新日志

2022-06-06  更新本地配置文件功能  
2022-06-07  更新UI；更新图标；新增说明；新增已响铃用户过滤功能；修复音频、背景不能更换bug，发布V2.2.1版本  
2022-06-08  新增日志时间打印，方便调试  
2022-06-09  发布V2.2.2版本 
2020-06-15  发布V2.3.0版本；去除本地配置读写换为localStorage  
2022-07-08  新增“消息栏”提示功能，发布V2.3.1版本  

# 特别声明:

- 本仓库发布的脚本及其中涉及的任何解锁和解密分析脚本，仅用于测试和学习研究，禁止用于商业用途，不能保证其合法性，准确性，完整性和有效性，请根据情况自行判断。

- 本项目内所有资源文件，禁止任何公众号、自媒体进行任何形式的转载、发布。

- 本人对任何脚本问题概不负责，包括但不限于由任何脚本错误导致的任何损失或损害。

- 间接使用脚本的任何用户，包括但不限于建立VPS或在某些行为违反国家/地区法律或相关法规的情况下进行传播, 本人对于由此引起的任何隐私泄漏或其他后果概不负责。

- 请勿将本仓库的任何内容用于商业或非法目的，否则后果自负。

- 如果任何单位或个人认为该项目的脚本可能涉嫌侵犯其权利，则应及时通知并提供身份证明，所有权证明，我们将在收到认证文件后删除相关脚本。

- 任何以任何方式查看此项目的人或直接或间接使用该项目的任何脚本的使用者都应仔细阅读此声明。本人保留随时更改或补充此免责声明的权利。一旦使用并复制了任何相关脚本或Script项目的规则，则视为您已接受此免责声明。


> ***您使用或者复制了本仓库且本人制作的任何脚本，则视为 `已接受` 此声明，请仔细阅读***
